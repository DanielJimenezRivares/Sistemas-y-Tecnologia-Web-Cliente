{"mappings":"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","sources":["<anon>","js/components.js"],"sourcesContent":["var $61286a2678f62cb2$exports = {};\nconst $61286a2678f62cb2$var$cloneTpl = (id)=>{\n    const t = document.getElementById(id);\n    if (!t) throw new Error(`Template no encontrado: #${id}`);\n    return t.content.cloneNode(true);\n};\nconst $61286a2678f62cb2$var$escapeHtml = (s)=>s == null ? \"\" : String(s);\n/* ------------------ app-header ------------------ */ class $61286a2678f62cb2$var$AppHeader extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'title'\n        ];\n    }\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-app-header'));\n    }\n    connectedCallback() {\n        this._render();\n    }\n    attributeChangedCallback() {\n        this._render();\n    }\n    _render() {\n        const h1 = this.shadowRoot.querySelector('h1');\n        h1.textContent = this.getAttribute('title') || 'Espacios Culturales';\n    }\n}\ncustomElements.define('app-header', $61286a2678f62cb2$var$AppHeader);\n/* ------------------ app-footer ------------------ */ class $61286a2678f62cb2$var$AppFooter extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-app-footer'));\n    }\n    connectedCallback() {\n        const y = this.shadowRoot.querySelector('.y');\n        if (y) y.textContent = String(new Date().getFullYear());\n    }\n}\ncustomElements.define('app-footer', $61286a2678f62cb2$var$AppFooter);\n/* ------------------ app-layout ------------------ */ class $61286a2678f62cb2$var$AppLayout extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-app-layout'));\n    }\n}\ncustomElements.define('app-layout', $61286a2678f62cb2$var$AppLayout);\n/* ------------------ search-espacios (orquestador) ------------------ */ class $61286a2678f62cb2$var$SearchEspacios extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-search-espacios'));\n        this.apiBase = window.API_BASE || '';\n        this._all = [];\n    }\n    connectedCallback() {\n        this.shadowRoot.addEventListener('search-espacios-event', (e)=>this._onSearch(e.detail));\n        this._list = this.shadowRoot.querySelector('espacios-list');\n        this._info = this.shadowRoot.getElementById('info');\n    }\n    async _onSearch({ q: q, tipo: tipo }) {\n        try {\n            const qs = new URLSearchParams();\n            if (tipo) qs.set('tipo', tipo);\n            if (q) qs.set('q', q);\n            qs.set('start', 0);\n            qs.set('end', 4);\n            const url = `${this.apiBase}/espacios${qs.toString() ? `?${qs.toString()}` : ''}`;\n            const res = await fetch(url);\n            if (!res.ok) throw new Error('network');\n            const body = await res.json();\n            this._all = Array.isArray(body.data) ? body.data : [];\n            this._render();\n        } catch (err) {\n            console.error(err);\n            this._info.textContent = 'Error al obtener datos.';\n            this._list.setItems([]);\n        }\n    }\n    _render() {\n        this._list.setItems(this._all);\n        this._info.textContent = `Mostrando ${this._all.length} resultados`;\n    }\n}\ncustomElements.define('search-espacios', $61286a2678f62cb2$var$SearchEspacios);\n/* ------------------ search-form ------------------ */ class $61286a2678f62cb2$var$SearchForm extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-search-form'));\n    }\n    connectedCallback() {\n        const form = this.shadowRoot.querySelector('form');\n        form.addEventListener('submit', (e)=>{\n            e.preventDefault();\n            const fd = new FormData(form);\n            const q = (fd.get('q') || '').toString().trim();\n            const tipo = (fd.get('tipo') || '').toString();\n            const detail = {\n                q: q,\n                tipo: tipo\n            };\n            this.dispatchEvent(new CustomEvent('search-espacios-event', {\n                detail: detail,\n                bubbles: true,\n                composed: true\n            }));\n        });\n    }\n}\ncustomElements.define('search-form', $61286a2678f62cb2$var$SearchForm);\n/* ------------------ espacios-list ------------------ */ class $61286a2678f62cb2$var$EspaciosList extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-espacios-list'));\n        this.items = [];\n    }\n    setItems(items) {\n        this.items = items || [];\n        this._render();\n    }\n    appendItems(items) {\n        this.items = [\n            ...this.items,\n            ...items || []\n        ];\n        this._render();\n    }\n    _render() {\n        const ul = this.shadowRoot.getElementById('list');\n        ul.innerHTML = '';\n        (this.items || []).forEach((it)=>{\n            const li = document.createElement('li');\n            const card = document.createElement('espacio-card');\n            card.data = it;\n            li.appendChild(card);\n            ul.appendChild(li);\n        });\n    }\n}\ncustomElements.define('espacios-list', $61286a2678f62cb2$var$EspaciosList);\n/* ------------------ espacio-card ------------------ */ class $61286a2678f62cb2$var$EspacioCard extends HTMLElement {\n    constructor(){\n        super();\n        this._data = null;\n        this._reviewsOpen = false;\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-espacio-card'));\n    }\n    connectedCallback() {\n        this._btnReviews = this.shadowRoot.querySelector('#btn-reviews');\n        if (this._btnReviews) this._btnReviews.addEventListener('click', (ev)=>{\n            this._reviewsOpen = !this._reviewsOpen;\n            this._syncReviewsButton();\n            this.reviews = this.shadowRoot.querySelector('search-valoraciones');\n            this.reviews._toggleReviews({\n                id: String(this._data?.id),\n                open: this._reviewsOpen\n            });\n        });\n        if (this._data) this._render();\n    }\n    set data(obj) {\n        this._data = obj || {};\n        this._render();\n    }\n    get data() {\n        return this._data;\n    }\n    _normalize(value) {\n        return value === '_U' ? '-' : value || '-';\n    }\n    _render() {\n        const d = this._data || {};\n        const nombre = this._normalize(d.nombre);\n        const direccion = this._normalize(d.direccion);\n        const horario = this._normalize(d.horario);\n        const telefono = this._normalize(d.telefono);\n        const web = this._normalize(d.web);\n        this.shadowRoot.querySelector('#title').textContent = $61286a2678f62cb2$var$escapeHtml(nombre);\n        this.shadowRoot.querySelector('#dir').textContent = $61286a2678f62cb2$var$escapeHtml(direccion);\n        const typesWrap = this.shadowRoot.querySelector('.types-wrap');\n        typesWrap.innerHTML = '';\n        if (Array.isArray(d.tipos) && d.tipos.length) {\n            const span = document.createElement('div');\n            span.className = 'types';\n            span.textContent = d.tipos.join(', ');\n            typesWrap.appendChild(span);\n        }\n        this.shadowRoot.querySelector('#horario').textContent = `Horario: ${$61286a2678f62cb2$var$escapeHtml(horario)}`;\n        this.shadowRoot.querySelector('#tel').textContent = `Tel: ${$61286a2678f62cb2$var$escapeHtml(telefono)}`;\n        const webEl = this.shadowRoot.querySelector('#web');\n        webEl.innerHTML = '';\n        if (web !== '-' && web !== '_U') {\n            const a = document.createElement('a');\n            a.className = 'link';\n            a.target = '_blank';\n            a.rel = 'noopener';\n            a.href = $61286a2678f62cb2$var$escapeHtml(web);\n            a.textContent = 'Visitar web';\n            webEl.appendChild(a);\n        } else webEl.textContent = 'Web: -';\n    }\n    _syncReviewsButton() {\n        // Gestiona aria + rotación flecha vía atributo en el host\n        if (this._btnReviews) this._btnReviews.setAttribute('aria-expanded', this._reviewsOpen ? 'true' : 'false');\n        if (this._reviewsOpen) this.setAttribute('reviews-open', '');\n        else this.removeAttribute('reviews-open');\n    }\n}\ncustomElements.define('espacio-card', $61286a2678f62cb2$var$EspacioCard);\n/* ------------------ search-valoraciones (orquestador) ------------------ */ class $61286a2678f62cb2$var$SearchValoraciones extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-search-valoraciones'));\n        this.apiBase = window.API_BASE || '';\n        this._all = [];\n        this.hidden = true;\n    }\n    connectedCallback() {\n        this._list = this.shadowRoot.querySelector('valoraciones-list');\n        this._write = this.shadowRoot.querySelector('valoraciones-write');\n        this.shadowRoot.addEventListener('review-uploaded', (ev)=>{\n            const id = ev.detail?.id ?? null;\n            if (id) this._toggleReviews({\n                id: id,\n                open: true\n            });\n        });\n    }\n    async _toggleReviews({ id: id, open: open }) {\n        this._write._id = id;\n        if (open) try {\n            if (!id) {\n                alert('No se ha seleccionado espacio.');\n                return;\n            }\n            const qs = new URLSearchParams();\n            qs.set('start', 0);\n            qs.set('end', 4);\n            const url = `${this.apiBase}/valoraciones/reviews/${id}?${qs.toString() ? `?${qs.toString()}` : ''}`;\n            const res = await fetch(url);\n            if (!res.ok) throw new Error('network');\n            const body = await res.json();\n            this._all = Array.isArray(body.data) ? body.data : [];\n            this.hidden = false;\n            this._render();\n        } catch (err) {\n            console.error(err);\n            this._info.textContent = 'Error al obtener datos.';\n            this._list.setItems([]);\n        }\n        else {\n            this._all = null;\n            this.hidden = true;\n            this._render();\n        }\n    }\n    _render() {\n        this._list.setItems(this._all);\n    }\n}\ncustomElements.define('search-valoraciones', $61286a2678f62cb2$var$SearchValoraciones);\n/* ------------------ valoraciones-list ------------------ */ class $61286a2678f62cb2$var$ValoracionesList extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-valoraciones-list'));\n        this.items = [];\n    }\n    setItems(items) {\n        this.items = items || [];\n        this._render();\n    }\n    appendItems(items) {\n        this.items = [\n            ...this.items,\n            ...items || []\n        ];\n        this._render();\n    }\n    _render() {\n        const ul = this.shadowRoot.getElementById('list');\n        ul.innerHTML = '';\n        (this.items || []).forEach((it)=>{\n            const li = document.createElement('li');\n            const card = document.createElement('valoraciones-card');\n            card.data = it;\n            li.appendChild(card);\n            ul.appendChild(li);\n        });\n    }\n}\ncustomElements.define('valoraciones-list', $61286a2678f62cb2$var$ValoracionesList);\n/* ------------------ valoraciones-card ------------------ */ class $61286a2678f62cb2$var$ValoracionesCard extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-valoraciones-card'));\n        this._data = null;\n    }\n    set data(d) {\n        this._data = d || {};\n        this._render();\n    }\n    get data() {\n        return this._data;\n    }\n    _fmtDate(iso) {\n        if (!iso) return '';\n        const d = new Date(iso);\n        if (isNaN(+d)) return '';\n        return d.toLocaleString(undefined, {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    }\n    _stars(n) {\n        const v = Math.max(0, Math.min(5, Number(n) || 0));\n        return \"\\u2605\".repeat(v) + \"\\u2606\".repeat(5 - v);\n    }\n    _render() {\n        const d = this._data || {};\n        const user = d.username ?? d.user ?? \"An\\xf3nimo\";\n        const rating = d.rating ?? 0;\n        const text = d.review ?? d.text ?? '';\n        const when = d.timestamp ?? d.createdAt ?? d.date ?? d.fecha ?? '';\n        this.shadowRoot.querySelector('.user').textContent = user;\n        this.shadowRoot.querySelector('.stars').textContent = this._stars(rating);\n        this.shadowRoot.querySelector('.date').textContent = this._fmtDate(when);\n        const textEl = this.shadowRoot.querySelector('.text');\n        if (text && text !== '-') {\n            textEl.textContent = text;\n            textEl.hidden = false;\n        } else {\n            textEl.textContent = '';\n            textEl.hidden = true;\n        }\n        this.shadowRoot.querySelector('.stars').setAttribute('aria-label', `Puntuaci\\xf3n: ${Number(rating) || 0} de 5`);\n    }\n}\ncustomElements.define('valoraciones-card', $61286a2678f62cb2$var$ValoracionesCard);\n/* ------------------ valoraciones-write ------------------ */ class $61286a2678f62cb2$var$ValoracionesWrite extends HTMLElement {\n    constructor(){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        this.shadowRoot.appendChild($61286a2678f62cb2$var$cloneTpl('tpl-valoraciones-write'));\n        this.apiBase = window.API_BASE || '';\n    }\n    set id(id) {\n        this._id = id ? String(id) : null;\n    }\n    get id() {\n        return this._id;\n    }\n    connectedCallback() {\n        const form = this.shadowRoot.getElementById('form');\n        form.addEventListener('submit', (e)=>this.#onSubmit(e));\n    }\n    async #onSubmit(e) {\n        e.preventDefault();\n        if (!this._id) {\n            alert('No se ha seleccionado espacio.');\n            return;\n        }\n        const form = e.currentTarget;\n        const fd = new FormData(form);\n        const rating = Number(fd.get('rating') || 0);\n        if (!rating) {\n            alert('El rating es obligatorio.');\n            return;\n        }\n        const payload = {\n            espacio_cultural_id: this._id,\n            rating: rating,\n            username: (fd.get('username') || '').toString().trim() || undefined,\n            review: (fd.get('review') || '').toString().trim() || undefined\n        };\n        try {\n            const url = `${this.apiBase}/valoraciones`;\n            const res = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(payload)\n            });\n            console.log(res);\n            if (!res.ok) throw new Error('network');\n            form.reset();\n            this.dispatchEvent(new CustomEvent('review-uploaded', {\n                detail: {\n                    id: this._id\n                },\n                bubbles: true,\n                composed: true\n            }));\n        } catch (err) {\n            console.error(err);\n            alert(\"No se pudo enviar la rese\\xf1a. Int\\xe9ntalo de nuevo.\");\n        }\n    }\n}\ncustomElements.define('valoraciones-write', $61286a2678f62cb2$var$ValoracionesWrite);\n\n\nexport {$61286a2678f62cb2$exports as default};\n//# sourceMappingURL=EspaciosCulturales.652b7965.js.map\n","const cloneTpl = (id) => {\r\n  const t = document.getElementById(id);\r\n  if (!t) throw new Error(`Template no encontrado: #${id}`);\r\n  return t.content.cloneNode(true);\r\n};\r\nconst escapeHtml = (s) => (s == null ? \"\" : String(s));\r\n\r\n/* ------------------ app-header ------------------ */\r\nclass AppHeader extends HTMLElement {\r\n  static get observedAttributes(){ return ['title']; }\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-app-header'));\r\n  }\r\n  connectedCallback(){ this._render(); }\r\n  attributeChangedCallback(){ this._render(); }\r\n  _render(){\r\n    const h1 = this.shadowRoot.querySelector('h1');\r\n    h1.textContent = this.getAttribute('title') || 'Espacios Culturales';\r\n  }\r\n}\r\ncustomElements.define('app-header', AppHeader);\r\n\r\n/* ------------------ app-footer ------------------ */\r\nclass AppFooter extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-app-footer'));\r\n  }\r\n  connectedCallback(){\r\n    const y = this.shadowRoot.querySelector('.y');\r\n    if (y) y.textContent = String(new Date().getFullYear());\r\n  }\r\n}\r\ncustomElements.define('app-footer', AppFooter);\r\n\r\n/* ------------------ app-layout ------------------ */\r\nclass AppLayout extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.attachShadow({ mode: 'open' });\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-app-layout'));\r\n  }\r\n}\r\ncustomElements.define('app-layout', AppLayout);\r\n\r\n/* ------------------ search-espacios (orquestador) ------------------ */\r\nclass SearchEspacios extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-search-espacios'));\r\n    this.apiBase = window.API_BASE || '';\r\n    this._all = [];\r\n  }\r\n  connectedCallback(){\r\n    this.shadowRoot.addEventListener('search-espacios-event', (e)=> this._onSearch(e.detail));\r\n    this._list = this.shadowRoot.querySelector('espacios-list');\r\n    this._info = this.shadowRoot.getElementById('info');\r\n  }\r\n  async _onSearch({q, tipo}){\r\n    try{\r\n      const qs = new URLSearchParams();\r\n      if (tipo) qs.set('tipo', tipo);\r\n      if (q) qs.set('q', q);\r\n      qs.set('start', 0);\r\n      qs.set('end', 4);\r\n\r\n      const url = `${this.apiBase}/espacios${qs.toString() ? `?${qs.toString()}` : ''}`;\r\n      const res = await fetch(url);\r\n\r\n      if (!res.ok) throw new Error('network');\r\n      const body = await res.json();\r\n      this._all = Array.isArray(body.data) ? body.data : [];\r\n      this._render();\r\n    } catch (err) {\r\n      console.error(err);\r\n      this._info.textContent = 'Error al obtener datos.';\r\n      this._list.setItems([]);\r\n    }\r\n  }\r\n  _render(){\r\n    this._list.setItems(this._all);\r\n    this._info.textContent = `Mostrando ${this._all.length} resultados`;\r\n  }\r\n}\r\ncustomElements.define('search-espacios', SearchEspacios);\r\n\r\n/* ------------------ search-form ------------------ */\r\nclass SearchForm extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-search-form'));\r\n  }\r\n  connectedCallback(){\r\n    const form = this.shadowRoot.querySelector('form');\r\n    form.addEventListener('submit', (e)=>{\r\n      e.preventDefault();\r\n      const fd = new FormData(form);\r\n      const q = (fd.get('q') || '').toString().trim();\r\n      const tipo = (fd.get('tipo') || '').toString();\r\n      const detail = { q, tipo };\r\n      this.dispatchEvent(new CustomEvent('search-espacios-event',{detail,bubbles:true,composed:true}));\r\n    });\r\n  }\r\n}\r\ncustomElements.define('search-form', SearchForm);\r\n\r\n/* ------------------ espacios-list ------------------ */\r\nclass EspaciosList extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-espacios-list'));\r\n    this.items = [];\r\n  }\r\n  setItems(items){ this.items = items || []; this._render(); }\r\n  appendItems(items){ this.items = [...this.items, ...(items||[])]; this._render(); }\r\n\r\n  _render(){\r\n    const ul = this.shadowRoot.getElementById('list');\r\n    ul.innerHTML = '';\r\n    (this.items || []).forEach((it)=>{\r\n      const li = document.createElement('li');\r\n      const card = document.createElement('espacio-card');\r\n      card.data = it;\r\n      li.appendChild(card);\r\n      ul.appendChild(li);\r\n    });\r\n  }\r\n}\r\ncustomElements.define('espacios-list', EspaciosList);\r\n\r\n/* ------------------ espacio-card ------------------ */\r\nclass EspacioCard extends HTMLElement {\r\n  constructor(){\r\n    super();\r\n    this._data = null;\r\n    this._reviewsOpen = false;\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-espacio-card'));\r\n  }\r\n  connectedCallback(){\r\n    this._btnReviews = this.shadowRoot.querySelector('#btn-reviews');\r\n    if (this._btnReviews) {\r\n      this._btnReviews.addEventListener('click', (ev)=>{\r\n        this._reviewsOpen = !this._reviewsOpen;\r\n        this._syncReviewsButton();\r\n        this.reviews = this.shadowRoot.querySelector('search-valoraciones');\r\n        this.reviews._toggleReviews({ id : String(this._data?.id), open: this._reviewsOpen });\r\n      });\r\n    }\r\n\r\n    if (this._data) this._render();\r\n  }\r\n  set data(obj){ this._data = obj || {}; this._render(); }\r\n  get data(){ return this._data; }\r\n\r\n  _normalize(value){\r\n    return value === '_U' ? '-' : (value || '-');\r\n  }\r\n\r\n  _render(){\r\n    const d = this._data || {};\r\n    const nombre = this._normalize(d.nombre);\r\n    const direccion = this._normalize(d.direccion);\r\n    const horario = this._normalize(d.horario);\r\n    const telefono = this._normalize(d.telefono);\r\n    const web = this._normalize(d.web);\r\n\r\n    this.shadowRoot.querySelector('#title').textContent = escapeHtml(nombre);\r\n    this.shadowRoot.querySelector('#dir').textContent = escapeHtml(direccion);\r\n\r\n    const typesWrap = this.shadowRoot.querySelector('.types-wrap');\r\n    typesWrap.innerHTML = '';\r\n    if (Array.isArray(d.tipos) && d.tipos.length){\r\n      const span = document.createElement('div');\r\n      span.className = 'types';\r\n      span.textContent = d.tipos.join(', ');\r\n      typesWrap.appendChild(span);\r\n    }\r\n\r\n    this.shadowRoot.querySelector('#horario').textContent = `Horario: ${escapeHtml(horario)}`;\r\n    this.shadowRoot.querySelector('#tel').textContent = `Tel: ${escapeHtml(telefono)}`;\r\n\r\n    const webEl = this.shadowRoot.querySelector('#web');\r\n    webEl.innerHTML = '';\r\n    if (web !== '-' && web !== '_U'){\r\n      const a = document.createElement('a');\r\n      a.className = 'link';\r\n      a.target = '_blank';\r\n      a.rel = 'noopener';\r\n      a.href = escapeHtml(web);\r\n      a.textContent = 'Visitar web';\r\n      webEl.appendChild(a);\r\n    } else {\r\n      webEl.textContent = 'Web: -';\r\n    }\r\n  }\r\n\r\n  _syncReviewsButton(){\r\n    // Gestiona aria + rotación flecha vía atributo en el host\r\n    if (this._btnReviews) {\r\n      this._btnReviews.setAttribute('aria-expanded', this._reviewsOpen ? 'true' : 'false');\r\n    }\r\n    if (this._reviewsOpen) {\r\n      this.setAttribute('reviews-open', '');\r\n    } else {\r\n      this.removeAttribute('reviews-open');\r\n    }\r\n  }\r\n}\r\ncustomElements.define('espacio-card', EspacioCard);\r\n\r\n/* ------------------ search-valoraciones (orquestador) ------------------ */\r\nclass SearchValoraciones extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-search-valoraciones'));\r\n    this.apiBase = window.API_BASE || '';\r\n    this._all = [];\r\n    this.hidden = true;\r\n  }\r\n\r\n  connectedCallback(){\r\n    this._list = this.shadowRoot.querySelector('valoraciones-list');\r\n    this._write = this.shadowRoot.querySelector('valoraciones-write');\r\n\r\n    this.shadowRoot.addEventListener('review-uploaded', (ev)=> {\r\n      const id = ev.detail?.id ?? null;\r\n      if (id) this._toggleReviews({ id: id, open: true });\r\n    });\r\n  }\r\n  async _toggleReviews({id, open}){\r\n    this._write._id = id;\r\n    if (open) {\r\n      try{\r\n        if (!id) {\r\n          alert('No se ha seleccionado espacio.');\r\n          return;\r\n        }\r\n\r\n        const qs = new URLSearchParams();\r\n        qs.set('start', 0);\r\n        qs.set('end', 4);\r\n\r\n        const url = `${this.apiBase}/valoraciones/reviews/${id}?${qs.toString() ? `?${qs.toString()}` : ''}`;\r\n        const res = await fetch(url);\r\n\r\n        if (!res.ok) throw new Error('network');\r\n        const body = await res.json();\r\n        this._all = Array.isArray(body.data) ? body.data : [];\r\n        this.hidden = false;\r\n        this._render();\r\n      } catch (err) {\r\n        console.error(err);\r\n        this._info.textContent = 'Error al obtener datos.';\r\n        this._list.setItems([]);\r\n      }\r\n    } else {\r\n      this._all = null;\r\n      this.hidden = true;\r\n      this._render();\r\n    }\r\n  }\r\n  _render(){\r\n    this._list.setItems(this._all);\r\n  }\r\n}\r\ncustomElements.define('search-valoraciones', SearchValoraciones);\r\n\r\n/* ------------------ valoraciones-list ------------------ */\r\nclass ValoracionesList extends HTMLElement{\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-valoraciones-list'));\r\n    this.items = [];\r\n  }\r\n  setItems(items){ this.items = items || []; this._render(); }\r\n  appendItems(items){ this.items = [...this.items, ...(items||[])]; this._render(); }\r\n\r\n  _render(){\r\n    const ul = this.shadowRoot.getElementById('list');\r\n    ul.innerHTML = '';\r\n    (this.items || []).forEach((it)=>{\r\n      const li = document.createElement('li');\r\n      const card = document.createElement('valoraciones-card');\r\n      card.data = it;\r\n      li.appendChild(card);\r\n      ul.appendChild(li);\r\n    });\r\n  }\r\n}\r\ncustomElements.define('valoraciones-list', ValoracionesList);\r\n\r\n/* ------------------ valoraciones-card ------------------ */\r\nclass ValoracionesCard extends HTMLElement {\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-valoraciones-card'));\r\n    this._data = null;\r\n  }\r\n\r\n  set data(d){\r\n    this._data = d || {};\r\n    this._render();\r\n  }\r\n  get data(){ return this._data; }\r\n\r\n  _fmtDate(iso){\r\n    if (!iso) return '';\r\n    const d = new Date(iso);\r\n    if (isNaN(+d)) return '';\r\n    return d.toLocaleString(undefined, {\r\n      year:'numeric', month:'2-digit', day:'2-digit',\r\n      hour:'2-digit', minute:'2-digit'\r\n    });\r\n  }\r\n\r\n  _stars(n){\r\n    const v = Math.max(0, Math.min(5, Number(n) || 0));\r\n    return '★'.repeat(v) + '☆'.repeat(5 - v);\r\n  }\r\n\r\n  _render(){\r\n    const d = this._data || {};\r\n    const user = d.username ?? d.user ?? 'Anónimo';\r\n    const rating = d.rating ?? 0;\r\n    const text = d.review ?? d.text ?? '';\r\n    const when = d.timestamp ?? d.createdAt ?? d.date ?? d.fecha ?? '';\r\n\r\n    this.shadowRoot.querySelector('.user').textContent = user;\r\n    this.shadowRoot.querySelector('.stars').textContent = this._stars(rating);\r\n    this.shadowRoot.querySelector('.date').textContent = this._fmtDate(when);\r\n\r\n    const textEl = this.shadowRoot.querySelector('.text');\r\n    if (text && text !== '-') {\r\n      textEl.textContent = text;\r\n      textEl.hidden = false;\r\n    } else {\r\n      textEl.textContent = '';\r\n      textEl.hidden = true;\r\n    }\r\n\r\n    this.shadowRoot.querySelector('.stars')\r\n      .setAttribute('aria-label', `Puntuación: ${Number(rating)||0} de 5`);\r\n  }\r\n}\r\ncustomElements.define('valoraciones-card', ValoracionesCard);\r\n\r\n/* ------------------ valoraciones-write ------------------ */\r\nclass ValoracionesWrite extends HTMLElement {\r\n  constructor(){\r\n    super();\r\n    this.attachShadow({mode:'open'});\r\n    this.shadowRoot.appendChild(cloneTpl('tpl-valoraciones-write'));\r\n    this.apiBase = window.API_BASE || '';\r\n  }\r\n\r\n  set id(id){ this._id = id ? String(id) : null; }\r\n  get id(){ return this._id; }\r\n\r\n  connectedCallback(){\r\n    const form = this.shadowRoot.getElementById('form');\r\n    form.addEventListener('submit', (e)=> this.#onSubmit(e));\r\n  }\r\n\r\n  async #onSubmit(e){\r\n    e.preventDefault();\r\n    if (!this._id) {\r\n      alert('No se ha seleccionado espacio.');\r\n      return;\r\n    }\r\n\r\n    const form = e.currentTarget;\r\n    const fd = new FormData(form);\r\n    const rating = Number(fd.get('rating') || 0);\r\n    if (!rating) {\r\n      alert('El rating es obligatorio.');\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      espacio_cultural_id: this._id,\r\n      rating,\r\n      username: (fd.get('username') || '').toString().trim() || undefined,\r\n      review: (fd.get('review') || '').toString().trim() || undefined\r\n    };\r\n\r\n    try{\r\n      const url = `${this.apiBase}/valoraciones`;\r\n      const res = await fetch(url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type':'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      console.log(res);\r\n      if (!res.ok) throw new Error('network');\r\n\r\n      form.reset();\r\n\r\n      this.dispatchEvent(new CustomEvent('review-uploaded', {\r\n          detail: { id: this._id },\r\n          bubbles: true,\r\n          composed: true\r\n      }));\r\n    } catch (err){\r\n      console.error(err);\r\n      alert('No se pudo enviar la reseña. Inténtalo de nuevo.');\r\n    }\r\n  }\r\n}\r\ncustomElements.define('valoraciones-write', ValoracionesWrite);"],"names":["$61286a2678f62cb2$exports","$61286a2678f62cb2$var$cloneTpl","id","t","document","getElementById","Error","content","cloneNode","$61286a2678f62cb2$var$escapeHtml","s","String","$61286a2678f62cb2$var$AppHeader","HTMLElement","observedAttributes","attachShadow","mode","shadowRoot","appendChild","connectedCallback","_render","attributeChangedCallback","h1","querySelector","textContent","getAttribute","customElements","define","$61286a2678f62cb2$var$AppFooter","y","Date","getFullYear","$61286a2678f62cb2$var$AppLayout","$61286a2678f62cb2$var$SearchEspacios","apiBase","window","API_BASE","_all","addEventListener","e","_onSearch","detail","_list","_info","q","tipo","qs","URLSearchParams","set","url","toString","res","fetch","ok","body","json","Array","isArray","data","err","console","error","setItems","length","$61286a2678f62cb2$var$SearchForm","form","preventDefault","fd","FormData","get","trim","dispatchEvent","CustomEvent","bubbles","composed","$61286a2678f62cb2$var$EspaciosList","items","appendItems","ul","innerHTML","forEach","it","li","createElement","card","$61286a2678f62cb2$var$EspacioCard","_data","_reviewsOpen","_btnReviews","ev","_syncReviewsButton","reviews","_toggleReviews","open","obj","_normalize","value","d","nombre","direccion","horario","telefono","web","typesWrap","tipos","span","className","join","webEl","a","target","rel","href","setAttribute","removeAttribute","$61286a2678f62cb2$var$SearchValoraciones","hidden","_write","_id","alert","$61286a2678f62cb2$var$ValoracionesList","$61286a2678f62cb2$var$ValoracionesCard","_fmtDate","iso","isNaN","toLocaleString","undefined","year","month","day","hour","minute","_stars","n","v","Math","max","min","Number","repeat","user","username","rating","text","review","when","timestamp","createdAt","date","fecha","textEl","$61286a2678f62cb2$var$ValoracionesWrite","currentTarget","payload","espacio_cultural_id","method","headers","JSON","stringify","log","reset","default"],"version":3,"file":"EspaciosCulturales.652b7965.js.map","sourceRoot":"../"}